#!/usr/bin/env perl6

use v6;

use lib 'lib';
use Haircut;

sub MAIN($action, $date?, Str :$store-file) {
    my $haircut;

    if $store-file {
        $haircut = Haircut.new(:$store-file);
    }
    else {
        $haircut = Haircut.new;
    }

    given $action {
        when 'summary' {
            say $haircut.text-summary;
        }
        when 'add' {
            if $date {
                $haircut.add-cut($date);
            }
            else {
                note "'$action': missing date";
                exit 2;
            }
        }
        default {
            note "'$action': no such action";
            exit 2;
        }
    }
}

# vim:syntax=perl6:softtabstop=4:shiftwidth=4
